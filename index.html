<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Agenda ‚Äì Tassin</title>

    <!-- Emp√™che le zoom iOS sur les inputs -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />

    <link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#1e40af">

<link rel="apple-touch-icon" href="icon-192.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">

     <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page">
      <!-- HEADER -->
      <header class="header">
  
  <!-- Bloc logo + sous-titre -->
  <div class="header-brand">
    <img 
      src="https://unnouveausoufflepourtassin.fr/wp-content/uploads/2025/10/site-construction.webp"
      alt="NSPT"
      class="brand-logo"
    />
    <p class="brand-subtitle">
      Inscriptions aux √©v√©nements de la campagne NSPT.
    </p>
  </div>

  <!-- Lien vers ton autre site -->
  <a id="externalLink" href="https://jonathanpothin.github.io/NSPT-Tractage/" target="_blank">
    üìÑ Tract NSPT
  </a>

  <!-- Bouton espace organisateur -->
  <div class="header-actions">
    <button id="adminToggleBtn" class="btn-ghost">
      Espace organisateur
    </button>
    <span id="admin-status" class="admin-status">
      Non connect√©
    </span>
  </div>

</header>

      <!-- ESPACE ORGANISATEUR : LOGIN (cach√© par d√©faut, ouvert via le bouton) -->
      <section id="admin-login-card" class="card">
        <div class="card-header">
          <h2 class="card-title">Connexion organisateur</h2>
        </div>

        <input
          type="email"
          id="adminEmail"
          placeholder="Email organisateur"
          autocomplete="username"
        />
        <input
          type="password"
          id="adminPassword"
          placeholder="Mot de passe"
          autocomplete="current-password"
        />
        <button id="adminLoginBtn" class="btn btn-full">
          Se connecter
        </button>
        <p id="adminLoginMsg" class="admin-message"></p>
        <p class="helper-text">
          Cette zone est r√©serv√©e √† l‚Äô√©quipe de campagne pour cr√©er les
          √©v√©nements et consulter la liste des inscrits.
        </p>
      </section>

      <!-- SECTION CREATION EVENEMENT (visible seulement quand admin) -->
      <section id="admin-section" class="card">
        <div class="card-header">
          <h2 class="card-title">Cr√©er un √©v√©nement</h2>
          <button id="adminLogoutBtn" class="btn-ghost">Se d√©connecter</button>
        </div>

        <input
          type="text"
          id="evTitle"
          placeholder="Titre de l'√©v√©nement"
        />
        <input type="date" id="evDate" />
        <input type="time" id="evTime" />
        <input type="text" id="evLocation" placeholder="Lieu" />
        <textarea
          id="evDesc"
          placeholder="Description (optionnel)"
        ></textarea>

        <button id="btnCreate" class="btn btn-full">Cr√©er</button>
        <p id="msgCreate"></p>
      </section>

      <!-- LISTE DES EVENEMENTS -->
      <section class="card">
        <div class="card-header">
        </div>
        <div id="events">
          <!-- Events inject√©s par app.js -->
        </div>
      </section>
      
      <!-- Bouton d'installation PWA -->
      <div id="installPWA" class="pwa-install hidden">
        üì± Installer l‚Äôapplication
      </div>

    <!-- Supabase config + app -->
      <!-- Supabase CDN (important pour avoir la variable globale `supabase`) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.0/dist/umd/supabase.min.js"></script>

  <!-- init client -->
  <script src="supabase.js"></script>

  <!-- La logique de l‚Äôapp (auth, events, etc.) -->
  <script src="app.js"></script>
  
  <script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./service-worker.js")
    .then(() => console.log("Service worker install√© !"))
    .catch(err => console.error("Erreur SW :", err));
}
</script>
</body>
</html>
